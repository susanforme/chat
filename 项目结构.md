## 路由设计

| url            | method | query      | body                              | response                                                     | 备注                                            |
| -------------- | ------ | ---------- | --------------------------------- | ------------------------------------------------------------ | ----------------------------------------------- |
| /              | get    |            |                                   |                                                              | 首页                                            |
| /user/login    | post   |            | {userName:string,password:string} | {status:1,data:{userName:string,id:string}}                  | 登录 md5 加密                                   |
| /user/logout   | get    |            |                                   | {status:1}                                                   | 退出                                            |
| /user/register | post   |            | {userName:string,password:string} | {status:1,data:{userName:string,id:string}}                  | 注册 md5 加密                                   |
| /user/captcha  | get    |            |                                   | {status:1,data:{img:string,text:string}}                     | 返回验证码                                      |
| /user/profile  | get    | ?id=string |                                   | {status:1,data:{}}                                           | 返回用户信息                                    |
| /user/check    | get    |            |                                   |                                                              | 带上 cookie,判断权限,根据 cookie 来进行 id 获取 |
| /user/msglist  | get    | ?id=string |                                   | {status:1,data:string[]                                      | 返回数据为id集合                                |
| /user/history  | post   |            | {userIds:string[]}                | {status:1,data:{send:{},receive:{},msg:string,createTime:string}[]} |                                                 |

## socket 接口

| body                                                         | response                                    | 备注                                    |
| ------------------------------------------------------------ | ------------------------------------------- | --------------------------------------- |
| {send: {    id: string;    userName: string;  };  receive:  {    id: string;   userName: string;  };  msg: string;} | {status:1,data:{...body,createTime:string}} | emit('caht')发送信息,on('back')获得信息 |



## 备注

- status
  - 0 失败
  - 1 成功

## 备忘

1. 获取 ip 归属地 http://ip-api.com/json/?lang=zh-CN
2. 注意在关键路由使用 session 鉴权登录
3. 规定返回格式
4. 在服务器端对密码进行二次加密,加上一个加密字符串
